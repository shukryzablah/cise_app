{% extends "layout.html" %}
{% block head %}
  {{ super() }}
<link rel="stylesheet" href="https://cdn.datatables.net/1.10.20/css/dataTables.bootstrap4.min.css">
<link rel="stylesheet" href="https://cdn.datatables.net/select/1.3.1/css/select.dataTables.min.css">
{% endblock %}
{% block view %}
<table id="studentstbl" class="table table-striped table-bordered">
  <thead>
    <tr>
      <th>Student ID</th>
      <th>First Name</th>
      <th>Last Name</th>
    </tr>
  </thead>
</table>
    
<script src="https://cdn.datatables.net/1.10.20/js/jquery.dataTables.min.js"></script>
<script src="https://cdn.datatables.net/1.10.20/js/dataTables.bootstrap4.min.js"></script>
<script src="https://cdn.datatables.net/select/1.3.1/js/dataTables.select.min.js"></script>
<script>
  var table_data = {{data | safe}}
  $(document).ready(function () {
      var table = $('#studentstbl').DataTable({
	  "select": true,
	  "data": table_data,
	  "columns": [
	      {"data": "sid"},
	      {"data": "legal_first"},
	      {"data": "legal_last"}
	  ]
      });

      table.on('select', function(e, dt, type, indexes) {
	  var sid = table.row(indexes).data()['sid'];
	  window.location.href = "/student/" + sid;
      })
  });
</script>
{% endblock %}
